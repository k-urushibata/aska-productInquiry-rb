# activeContext.md

## 現在の作業の焦点
- Docker起動時の自動テーブル初期化の実装完了
- 商品在庫管理・検索システムの安定運用
- 問い合わせ機能の実装（管理者メール送信、PHPMailer＋MailHog対応）
- ブランチ戦略（master/develop/feature/fix）に基づく開発体制の確立
- ドキュメント・設計の最新化と整理
- 不要な記述やファイルの継続的な整理

## 最近の変更内容
- Docker起動時の自動テーブル初期化を実装
  - `database/schema/01-init-schema.sql`を作成（ファイル名を変更して確実な実行順序を保証）
  - テーブル定義を改善（タイムスタンプ、コメント、インデックス追加）
  - Docker Compose設定を改善（ヘルスチェック、文字コード設定、認証方式指定）
  - 初期化テストスクリプト`docker/init-test.sh`を作成
  - README.mdを更新（Docker環境での自動初期化手順を追加）
- 問い合わせ機能のメール送信処理をmail()からPHPMailer＋MailHog SMTP送信に変更
- composer, unzip, php-zip, libzip-devをwebコンテナに導入し、PHPMailerをcomposerでインストール
- InquiryController.phpのautoloadパス修正

## 次のステップ
- Docker環境での自動初期化テスト実行
- 問い合わせ機能の動作確認（MailHogでの受信確認）
- 機能開発タスクの優先順位決定
- feature/fixブランチでの開発開始
- 入力バリデーション強化やUI/UX改善の実装
- 進捗や課題はprogress.mdで随時管理

## 現在の判断・考慮事項
- Docker起動時にテーブル定義が自動的に適用されるため、手動でのDB初期化が不要
- 問い合わせ機能はPHPMailer＋MailHog SMTPで実装（mail()は使わない）
- MCPサーバーは現状利用しない
- プロジェクト構造・ドキュメントの明確化を重視
- シンプルな運用・拡張性の両立を目指す
- developブランチをベースに機能開発を進める

## 重要なパターン・好み
- プロジェクト構造の明確化
- 不要なファイル・記述は積極的に削除
- ドキュメントは常に最新に保つ
- ブランチ戦略に基づく開発フロー
- シンプルで確実な機能実装を優先
- Docker環境での自動化を重視

## 学び・洞察
- Docker Composeのヘルスチェック機能による依存関係の適切な管理
- MySQL初期化スクリプトのファイル名順序の重要性
- シークレット情報の管理・履歴リセットの重要性
- ブランチ戦略による開発効率・品質向上
- プロジェクトの技術選定や運用方針は状況に応じて柔軟に見直す
- 運用フローは実装前に十分検討し、シンプルな解決策を選択する
- Docker環境でのメール送信はmail()ではなくSMTP＋PHPMailerが確実 